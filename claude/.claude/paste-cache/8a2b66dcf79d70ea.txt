# SerializationException: Expected type: num

**Issue ID:** 7127530010
**Project:** platinumrx-app
**Date:** 20/01/2026, 11:20:32
## Issue Summary
Serialization Error: Null received for required numeric 'discountPercentage'
**What's wrong:** **SerializationException** occurred during data mapping.
**In the trace:** The issue appears during **MedicineRepositoryImpl.getMedicineListing** execution.
**Possible cause:** The **discountPercentage** field is unexpectedly **null** when a **num** type is required for deserialization.

## Tags

- **dart:** Dart 3.7.2 (stable)
- **dart.name:** Dart
- **device:** 23076RN4BI
- **device.class:** medium
- **device.family:** 23076RN4BI
- **dist:** 289
- **environment:** production
- **event.environment:** dart
- **event.origin:** flutter
- **fatal:** false
- **flutter.name:** Flutter
- **level:** error
- **os:** Android 15
- **os.build:** AQ3A.240912.001
- **os.name:** Android
- **os.rooted:** no
- **reason:** null
- **release:** in.platinumrx@2.0.14+289
- **user:** id:6502470

## Exception

### Exception 1
**Type:** SerializationException
**Value:** Expected type: num
Got: Null
Key: discountPercentage
Source: {genericMedicine: false, hasSubstitute: false, masterItemData: {drug_form: Solution For Injection, generic: false, sku_name: Covaxin, id: SKUData_1036895, display_name2: CovaxinVaccine, display_name: Covaxin Vaccine, discounted_price: 0, ailment_type: Acute, mrp: 0, expiry_months: 8, top_brand: false, in_consideration: false, substitute_medicine: 0, drug_stock: 0, hero_image: https://platinumrx.gumlet.io/meds-prescription/1f2777fd-07c3-4f83-bfb4-7b253a5377bb_wm.png, is_active: true, hero_images: ["https://cdn.platinumrx.in/meds-prescription/1f2777fd-07c3-4f83-bfb4-7b253a5377bb_wm.png", "https://cdn.platinumrx.in/meds-prescription/30ffe279-9c7c-42d9-bc56-7bbb5f5212b2_wm.png", "https://cdn.platinumrx.in/meds-prescription/ce027547-b813-418c-a1d3-63661a3ea966_cswm"], pack_quantity_value: 10, purchased_frequency: 0, salt_composition2: WholeVirion,InactivatedCoronaVirusvaccine, banned: true, drug_category: RX, master_drug_code: 1036895, manufacturer_name: Bharat Biotech, salt_composition: Whole Virion, Inactivated Corona Virus vaccine, discount_percentage: 0, cold_storage: true, unit_of_measurement: ml, manufacturer_logo: https://platinumrx.gumlet.io/meds-prescription/0818b580-5fc1-47fe-a200-6a219e79882c.png, pack_form: Vial, pack_quantity_value_decimal: 10, normalized_plp_click_count: null, normalized_cart_addition_count: 0, normalized_pdp_view_count: 0.104164, normalized_search_suggestion_count: null, updated_at: 2026-01-19T18:30:51.858Z, score: 140.01486, popularityScore: 280.03}, discountPercentage: null}

Stack Trace: #0      validate (package:platinum_rx/src/core/validator/validator.dart:16)
#1      createValidatorFor.<anonymous closure> (package:platinum_rx/src/core/validator/validator.dart:26)
#2      new MedicineListingPairModel.fromMap (package:platinum_rx/src/features/medicine/data/models/medicine_listing_pair.dart:31)
#3      SerializationMixin.serializeFromIterable.<anonymous closure> (package:platinum_rx/src/features/medicine/data/repository/medicine_repository.dart:171)
#4      ListBase.forEach (dart:collection/list.dart:51)
#5      SerializationMixin.serializeFromIterable (package:platinum_rx/src/features/medicine/data/repository/medicine_repository.dart:169)
#6      MedicineRepositoryImpl.getMedicineListing.<anonymous closure> (package:platinum_rx/src/features/medicine/data/repository/medicine_repository.dart:70)
#7      Result.map (package:platinum_rx/src/core/networking/result.dart:18)
#8      MedicineRepositoryImpl.getMedicineListing (package:platinum_rx/src/features/medicine/data/repository/medicine_repository.dart:67)
<asynchronous suspension>
#9      MedicineUseCase.getMedicineListing (package:platinum_rx/src/features/medicine/domain/use_case/medicine_use_case.dart:62)
<asynchronous suspension>
#10     medicineListingProvider.<anonymous closure> (package:platinum_rx/src/features/medicine/presentation/providers/medicine_listing_provider.dart:10)
<asynchronous suspension>
#11     FutureHandlerProviderElementMixin.handleFuture.<anonymous closure>.<anonymous closure> (package:riverpod/src/async_notifier/base.dart:355)
<asynchronous suspension>

#### Stacktrace

```
 validate in validator.dart [Line 17] (In app)
 createValidatorFor.<fn> in validator.dart [Line 26] (In app)
 new MedicineListingPairModel.fromMap in medicine_listing_pair.dart [Line 31] (In app)
 SerializationMixin.serializeFromIterable.<fn> in medicine_repository.dart [Line 171] (In app)
 ListBase.forEach in list.dart [Line 51] (Not in app)
 SerializationMixin.serializeFromIterable in medicine_repository.dart [Line 169] (In app)
 MedicineRepositoryImpl.getMedicineListing.<fn> in medicine_repository.dart [Line 70] (In app)
 Result.map in result.dart [Line 18] (In app)
 MedicineRepositoryImpl.getMedicineListing in medicine_repository.dart [Line 67] (In app)
 Unknown function in <asynchronous suspension> [Line null] (Not in app)
 MedicineUseCase.getMedicineListing in medicine_use_case.dart [Line 62] (In app)
 Unknown function in <asynchronous suspension> [Line null] (Not in app)
 medicineListingProvider.<fn> in medicine_listing_provider.dart [Line 10] (In app)
 Unknown function in <asynchronous suspension> [Line null] (Not in app)
 FutureHandlerProviderElementMixin.handleFuture.<fn>.<fn> in base.dart [Line 355] (In app)
```
